{
  "info": {
    "name": "InterviewAI - AI Avatar Service",
    "description": "API collection for testing the InterviewAI AI Avatar backend service.\n\n## Features\n- Health check endpoints\n- Interview info and avatar status\n- HTTP-based interview sessions (Render compatible)\n- Async video generation with polling\n\n## Interview Flow (Async - Recommended)\n1. POST /interview/start → Get session_id\n2. POST /interview/{session_id}/question/generate → Get audio + generation_id\n3. GET /interview/video/status/{generation_id} → Poll until video ready\n4. POST /interview/{session_id}/answer/async → Submit answer, get next question\n5. Repeat until complete",
    "_postman_id": "interview-ai-avatar-service",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "session_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "generation_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health & Status",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/health",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "health"]
            },
            "description": "Check if the service is running and healthy."
          },
          "response": []
        },
        {
          "name": "Avatar Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/avatar/status",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "avatar", "status"]
            },
            "description": "Get D-ID avatar service status."
          },
          "response": []
        },
        {
          "name": "Interview Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/interview/info",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "info"]
            },
            "description": "Get information about the interview format."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Async Interview Flow (Recommended)",
      "description": "Use these endpoints for production. Video generation happens in background, client polls for status.",
      "item": [
        {
          "name": "1. Start Interview",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.collectionVariables.set('session_id', jsonData.session_id);",
                  "console.log('Session ID:', jsonData.session_id);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/interview/start",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "start"]
            },
            "description": "Start a new interview session."
          },
          "response": [
            {
              "name": "Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"session_id\": \"session_abc123\",\n  \"state\": \"in_progress\",\n  \"total_questions\": 10,\n  \"avatar_mode\": \"video\",\n  \"idle_video_url\": \"https://clips-presenters.d-id.com/.../idle.mp4\"\n}"
            }
          ]
        },
        {
          "name": "2. Generate Question (Async)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.generation_id) {",
                  "  pm.collectionVariables.set('generation_id', jsonData.generation_id);",
                  "  console.log('Generation ID:', jsonData.generation_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/interview/{{session_id}}/question/generate",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "{{session_id}}", "question", "generate"]
            },
            "description": "Start generating question with avatar video.\n\nReturns IMMEDIATELY with:\n- Audio (ready to play)\n- generation_id (use to poll for video)\n- idle_video_url (show while waiting)\n\nVideo generates in background (60-90s)."
          },
          "response": [
            {
              "name": "Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"type\": \"question\",\n  \"generation_id\": \"gen_abc123\",\n  \"video_status\": \"generating\",\n  \"question_id\": 1,\n  \"question_text\": \"Tell me about yourself...\",\n  \"audio_base64\": \"//uQxAAA...\",\n  \"audio_duration\": 10.5,\n  \"idle_video_url\": \"https://...\",\n  \"video_url\": null\n}"
            }
          ]
        },
        {
          "name": "3. Poll Video Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/interview/video/status/{{generation_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "video", "status", "{{generation_id}}"]
            },
            "description": "Poll for video generation status.\n\nCall every 5-10 seconds until status is 'completed'.\n\nStatus values:\n- pending: Not started\n- processing: D-ID is generating\n- completed: video_url available\n- failed: Check error field"
          },
          "response": [
            {
              "name": "Processing",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"generation_id\": \"gen_abc123\",\n  \"status\": \"processing\",\n  \"elapsed_seconds\": 25.5,\n  \"estimated_remaining_seconds\": 50,\n  \"video_url\": null\n}"
            },
            {
              "name": "Completed",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"generation_id\": \"gen_abc123\",\n  \"status\": \"completed\",\n  \"elapsed_seconds\": 75.2,\n  \"video_url\": \"https://d-id-clips-prod.s3.us-west-2.amazonaws.com/...\",\n  \"latency_ms\": 75200\n}"
            }
          ]
        },
        {
          "name": "4. Submit Answer (Async)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.generation_id) {",
                  "  pm.collectionVariables.set('generation_id', jsonData.generation_id);",
                  "  console.log('Next Generation ID:', jsonData.generation_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question_id\": 1,\n  \"answer_text\": \"My name is John and I have 5 years of experience...\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/interview/{{session_id}}/answer/async",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "{{session_id}}", "answer", "async"]
            },
            "description": "Submit answer and start generating next question.\n\nReturns immediately with next question's audio and generation_id.\nPoll for video status using the generation_id."
          },
          "response": []
        },
        {
          "name": "5. Get Session Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/interview/{{session_id}}/status",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "{{session_id}}", "status"]
            },
            "description": "Get current session status."
          },
          "response": []
        },
        {
          "name": "6. End Interview",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/interview/{{session_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "{{session_id}}"]
            },
            "description": "End session and cleanup."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Sync Interview Flow (Local Only)",
      "description": "These endpoints wait for video generation. May timeout on Render (30s limit).",
      "item": [
        {
          "name": "Get Question (Sync - May Timeout)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/interview/{{session_id}}/question",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "{{session_id}}", "question"]
            },
            "description": "⚠️ WARNING: May timeout on Render (30s limit).\n\nWaits for video generation (60-90s).\nUse async endpoints instead for production."
          },
          "response": []
        },
        {
          "name": "Submit Answer (Sync - May Timeout)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"question_id\": 1,\n  \"answer_text\": \"My answer...\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/interview/{{session_id}}/answer",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "interview", "{{session_id}}", "answer"]
            },
            "description": "⚠️ WARNING: May timeout on Render.\n\nUse /answer/async instead."
          },
          "response": []
        }
      ]
    },
    {
      "name": "OpenAPI Docs",
      "item": [
        {
          "name": "Swagger UI",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/docs",
              "host": ["{{base_url}}"],
              "path": ["docs"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
